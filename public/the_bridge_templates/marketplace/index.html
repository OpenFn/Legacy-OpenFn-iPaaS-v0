<div class="header-image" ng-controller="MarketplaceController as marketplace">
  <div class="headline container-fluid">

    <h2 class="margin-small-bottom">open<strong>Marketplace</strong></h2>
    <h4 class="headline-text margin-top-remove margin-large-bottom">Find the technology you need to grow your impact.</h4>

    <div class="col-md-10 col-md-offset-1">
      <div class="search-field">
        <input
          type="text"
          class="form-control"
          ng-class="alex"
          placeholder="Start typing to search..."
          ng-model="searchText"
          tooltip-trigger="mouseenter"
          tooltip="Search for product names, descriptions, tags, or websites."
          typeahead="keyword for keyword in keywords | filter:$viewValue | limitTo:8">
      </div>
    </div>

    <div class="col-md-10 col-md-offset-1">
      <div class="new-product-link margin-small-top">
        <label
          style="float: left;"
          class="btn integrated-btn"
          ng-click="go('/product/new')">
          <i class="fa fa-plus"></i>Add your product
        </label>

        <label
          style="float: right;"
          class="btn integrated-btn"
          tooltip-trigger="mouseenter"
          tooltip-placement="bottom"
          tooltip="Click here to show only connected apps."
          ng-model="searchFilters.integrated"
          btn-checkbox>
          Integrated
        </label>
      </div>
    </div>

  </div>

  <!-- refactor style attribute -->
  <div class="container-fluid" style="background-color: #e0e0e0;">
  <!-- refactor style attribute -->
    <div class="col-sm-12 margin-top">

      <div class="col-md-2" id="custom-accord" ng-repeat="category in categories">
        <accordion>
          <accordion-group>
            <accordion-heading>
              {{category.name}} <i class="pull-right fa fa-caret-down"></i>
            </accordion-heading>
            <li style="cursor: pointer"
              class="list-group-item"
              ng-repeat="tag in tags | filter:{tag_category_id: category.id }  | orderBy: '-taggings_count'"
              ng-click="tagFilter(tag)"
              ng-model="tag.active"
              btn-checkbox
              ng-class="(((tag.taggings_count == 0)&&(!tag.active))||(isLoading)) ? 'better-button-disabled' : 'better-button-able'">{{tag.name}}
              <span class="badge">
                {{tag.taggings_count}}
              </span>
            </li>
          </accordion-group>
        </accordion>
      </div>

      <!-- refactor placeholder -->
      <div class="col-md-2" id="custom-accord">
        <accordion>
          <accordion-group>
            <accordion-heading>
              Reset filter<i class="pull-right fa fa-times-circle-o"></i>
            </accordion-heading>
          </accordion-group>
        </accordion>
      </div>
      <!-- refactor placeholder -->

    </div>
  </div>

  <div class="container-fluid">
    <div class="col-sm-12">
      <div class="product-list row" ontouchstart="this.classList.toggle('hover');">

        <div class="col-xs-12 center" ng-if="isLoading">
          <br><br><br>
          <i class="fa fa-refresh fa-2x fa-spin"></i>
          <h4>
            <br>
            Hang tight while we gather data on hundreds of technologies, reviews, tags, and votes.
          </h4>
        </div>

        <div class="col-sm-12 margin-large-bottom margin-large-top">
          <div ng-include src="'/the_bridge_templates/marketplace/products.html'"></div>
        </div>

      </div>
    </div>

  </div>
</div>

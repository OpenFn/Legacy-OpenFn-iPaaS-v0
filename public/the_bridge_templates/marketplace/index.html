<style type="text/css">
  li {
    list-style-type: none;
  }
.my-list li {
    list-style: none;
    padding-top: 8px;
    font-size: 15px;   
}

.tag-count-badge {
  display: inline-block;
  min-width: 24px;
  padding: 3px 13px 3px 13px;
  font-size: 15px;
  color: white;
  line-height: 1;
  vertical-align: baseline;
  white-space: nowrap;
  text-align: center;
  background-color: #999999;
  border-radius: 15px;
}

.tag-pane {
  display: table-cell;
  vertical-align: text-top;
  float: none;
  font-size: x-large;
  text-align: center;
}
.tag-btn {
  border-radius: 0px;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  margin:0px auto;
}
.tag-filter-box {
  border-radius: 6px;
  padding-left: 60px;
  padding-right: 60px;
  color: inherit;
  background-color: #eee;
}

  .better-button-able {
    color: black;
    background: none;
    box-shadow: none;
    margin-bottom: -3px;
    margin-top: 3px;
    border-radius: 24px;
}

  .better-button-disabled {
    background: none;
    box-shadow: none;
    margin-bottom: -3px;
    margin-top: 3px;
    pointer-events: none;
    border-radius: 24px;
}

</style>

<header class="header-image">
    <div class="headline">
      <h1>
        <i class="fa fa-shopping-cart"></i> open<strong>Marketplace</strong>
      </h1>
      <h3>
        Find the <strong>tools</strong> you need to grow your impact; vote for new <i class="fa fa-plug"></i> integrations.
      </h3>
    </div>
</header>

  <div class="featurette dark">
    <div class="container">
      <div ng-controller="MarketplaceController as marketplace" class="row">          
        <div class="col-md-10 col-md-offset-1">
          <div class="search-field">
              <input type:"text" class="form-control" class="form-control" placeholder="Start typing to search..." ng-model="searchText" tooltip-trigger="focus" tooltip="Search for product names, descriptions, tags, or websites.">
          </div>
        </div>
        <div class="col-md-10 col-md-offset-1">  
          <div class="new-product-link">
            <label style="float: left;" class="btn btn-open push-down" data-toggle="modal" data-target="#add_modal">
              <i class="fa fa-plus"></i> Add your product
            </label>
<!--             <label style="margin-left: 1em;" data-toggle="modal" data-target="#help_modal" class="btn btn-open">
              <i class="fa fa-question-circle"></i> Help.
            </label> -->
            <label style="float: right;" class="btn btn-open integrated-btn" tooltip-trigger="mouseenter" tooltip-placement="bottom" tooltip="Click here to show only connected apps." ng-model="searchFilters.integrated" btn-checkbox>
                Integrated
            </label>
            <button style="float:right;" class="btn btn-integrated-btn">Clear Filters</button>
          </div>
        </div>
        <br>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

        <button type="button" class="btn btn-info tag-btn" data-toggle="collapse" data-target="#tag-bar">Filter By Tags
        </button>

        <div id="tag-bar" class="row collapse tag-filter-box">
              <br><br>
              <div class="col-md-2 my-list tag-pane" ng-repeat="category in categories">
              {{category.name}}
              <li ng-repeat="tag in tags | filter:{tag_category_id: category.id }  | orderBy: '-tag_count' | limitTo:5" ng-init="taggings_count(tag)"> 
              <a class="integrated-btn" ng-click="tagFilter(tag)" ng-class="tag.tag_count == 0 ? 'better-button-disabled' : 'better-button-able'" ng-model="tag.active" btn-checkbox>
              {{tag.name}} <span class="tag-count-badge">{{tag.tag_count}}</span></a></li>
              </div>
              <div class="col-md-1"></div>
              <br><br>
        </div>
        
        <br>
        <div class="product-list row" ng-if="isLoading">
          <div class="col-xs-12 center">
          <br><br><br><br><br>
            <i class="fa fa-refresh fa-3x fa-spin"></i>
          </div>
        </div>
        <div class="product-list row" ontouchstart="this.classList.toggle('hover');">
          <br>
          <div ng-repeat="product in products | filter:filterProducts">
            <div class="product-container col-lg-4 col-md-6 col-sm-6 col-xs-12">
              <div ng-class="product.integrated ? 'product integrated' : 'product'" tooltip-trigger="mouseenter" tooltip="Click to learn about {{product.name}}." ng-click="go('/product/' + product.id)" style="cursor: default">
                <div class='rating'>
                  <span class='live'>
                    <i class="fa fa-star-o" ng-show="!product.rating"></i>
                    <i class="fa fa-star-half-o" ng-show="product.rating>0 && product.rating<=0.5"></i>
                    <i class="fa fa-star" ng-show="product.rating>0.5"></i>

                    <i class="fa fa-star-o" ng-show="product.rating<=1"></i>
                    <i class="fa fa-star-half-o" ng-show="product.rating>1 && product.rating<=1.5"></i>
                    <i class="fa fa-star" ng-show="product.rating>1.5"></i>
                    
                    <i class="fa fa-star-o" ng-show="product.rating<=2"></i>
                    <i class="fa fa-star-half-o" ng-show="product.rating>2 && product.rating<=2.5"></i>
                    <i class="fa fa-star" ng-show="product.rating>2.5"></i>
                    
                    <i class="fa fa-star-o" ng-show="product.rating<=3"></i>
                    <i class="fa fa-star-half-o" ng-show="product.rating>3 && product.rating<=3.5"></i>
                    <i class="fa fa-star" ng-show="product.rating>3.5"></i>
                    
                    <i class="fa fa-star-o" ng-show="product.rating<=4"></i>
                    <i class="fa fa-star-half-o" ng-show="product.rating>4 && product.rating<=4.5"></i>
                    <i class="fa fa-star" ng-show="product.rating>4.5"></i>
                  </span>
                  &nbsp;({{product.reviews_count}})
                </div>
                <h3 class="title">
                  {{product.name}}
                </h3>
                <div class='tile-tweet'>
                  {{product.description | limitTo:117}}
                </div>
                <a ng-href="{{product.website}}" ng-click="$event.stopPropagation()" class="website-link" target="_blank" tooltip-trigger="mouseenter" tooltip="Check out the {{product.name}} website.">
                  <i class="fa fa-external-link"></i>
                </a>              
                <a href="/mappings" class="vote-link" ng-show="product.integrated" ng-click="$event.stopPropagation()">
                  <i class="fa fa-plug"></i>
                </a>
                <a style="cursor: auto" ng-hide="product.integrated" class="vote-count">
                  <i class="fa fa-plug"></i>+ <span class="live">{{product.votes_count}}</span>
                </a>
                <a ng-click="changeVoteFor(product); $event.stopPropagation()" class="vote-link" ng-show="!product.integrated" tooltip-trigger="mouseenter" tooltip="Vote up if you want to connect {{product.name}}.">               
                  <i ng-class="{'fa ' : true, 'fa-chevron-down' : product.hasVoteForUser, 'fa-chevron-up' : !product.hasVoteForUser}"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id="add_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="featurette dark">
                <div class="modal-header center">Coming Soon!
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id="help_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="featurette dark">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="myModalLabel">How to use the marketplace.</h4>
                </div>
                <div class="modal-body">          
                  <span class="mb-title">Search</span> for technologies by typing anything you want: the job you want to perform, features you know you'll need, the name of the tool or even the device you need to run it on. We'll scan all of the text associated with each technology and return those results that match.
                  <br>
                  <br>
                  <span class="mb-title">Click</span> on a technology to learn about it. Each day we're adding more, including features, tech specs, pricing, reviews, and a list of useful resources including case-studies from open[Fn]content.
                  <br>
                  <br>
                  From the marketplace tile, or a technology's detail page you can:
                  <br>
                  <br>
                  <ul>
                    <li>Visit an app's <strong>homepage</strong> by clicking the <i class="fa fa-external-link"></i> icon,</li><br>
                    <li>Setup your <strong>credentials</strong> if the app is already integrated by clicking the <i class="fa fa-plug"></i> icon,</li><br>
                    <li>See how many votes the app has received <strong>for integration</strong> by checking the <i class="fa fa-plug"></i>+<span class="live"> N</span> indicator,</li><br>
                    <li>And <strong>vote</strong> for the app if you'd like to see it integrated by clicking the <i class="fa fa-chevron-up"></i> icon.</li>
                  </ul>
                  <br>
                  We'll prioritize the <span class="mb-title">integration</span> of new technologies according to your votes.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>